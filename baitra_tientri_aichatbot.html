<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>B√†i Tr√† Ti√™n Tri N√¢ng Cao</title>
<style>
    body{font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",sans-serif;margin:0;background:#f0f0f5;color:#111;padding-bottom:60px}
    .container{max-width:900px;margin:0 auto;background:#fff;min-height:100vh;box-shadow:0 0 12px rgba(0,0,0,0.06)}
    .header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;border-bottom:1px solid #e9e9ef;position:sticky;top:0;background:#fff;z-index:10}
    .back-link{font-size:1rem;font-weight:700;color:#007aff;text-decoration:none;display:flex;align-items:center;gap:4px}
    .title{font-weight:700;flex-grow:1;text-align:center;font-size:1.25rem}
    .content{padding:18px}
    .controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-bottom:14px}
    button{padding:12px;border:none;border-radius:10px;background:#007aff;color:#fff;font-weight:700;cursor:pointer;box-shadow:0 2px 6px rgba(0,122,255,0.2);transition:background .2s}
    button:hover{background:#005bb5}
    button:disabled{background:#9aa3ad;cursor:not-allowed}
    /* Style cho c√°c n√∫t h√†nh ƒë·ªông */
    .btn-copy{background:#2e7d32;}
    .btn-copy:hover{background:#1b5e20}
    .btn-ai{font-weight:900;transition:background .2s;} /* M√†u s·∫Ω ƒë∆∞·ª£c JS g√°n */

    #result{margin-top:12px;padding:14px;background:#f7f7f9;border-radius:10px;min-height:160px;box-shadow:inset 0 1px 3px rgba(0,0,0,0.04);transition:opacity .35s;opacity:1}
    .spread-title{font-size:1.15rem;font-weight:700;color:#2e7d32;text-align:center;margin-bottom:8px}
    .card-list{list-style:none;padding:0;margin:0}
    .card-list li{background:#fff;margin:8px 0;padding:10px;border-radius:8px;border-left:4px solid #38761d;display:flex;gap:10px;align-items:center}
    .card-title{min-width:150px;font-weight:700;color:#007aff;flex-shrink:0}
    .card-info{flex-grow:1;display:flex;align-items:center;gap:12px;}
    .card-keywords{font-size:.92rem;color:#666;}
    .card-img{width:40px;height:auto;border-radius:4px;flex-shrink:0;box-shadow:0 1px 3px rgba(0,0,0,0.1);}
    .deck-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:8px}
    .deck-item{background:#fff;padding:8px;border-radius:6px;border-left:3px solid #ccc}
    .actions{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .small{font-size:.92rem;color:#666}
    .error{color:#a33;background:#ffecec;padding:8px;border-radius:6px;margin-top:10px}
    
    /* Loading state */
    .loading-display{text-align:center;padding:40px 0}
    .loading-instruction{color:#555;margin:0;font-size:1.1rem}
    .loading-spinner{border: 4px solid #f3f3f3; border-top: 4px solid #007aff; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 15px auto;}
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    /* AI Toggle */
    .ai-selector{display:flex;justify-content:center;align-items:center;gap:10px;margin-bottom:10px;padding:8px;background:#e9e9ef;border-radius:8px;}
    .ai-selector label{font-weight:700;color:#333;font-size:.95rem;}
    .ai-toggle{display:flex;background:#fff;border-radius:6px;padding:3px;box-shadow:inset 0 1px 3px rgba(0,0,0,0.1);}
    .ai-option{padding:6px 10px;border-radius:4px;cursor:pointer;font-weight:600;transition:background .2s, color .2s;}
    .ai-option.selected-gemini{background:#007aff;color:#fff;}
    .ai-option.selected-chatgpt{background:#28a745;color:#fff;}
    
    .toast-message{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:10px 15px;border-radius:5px;opacity:0;transition:opacity 0.3s;z-index:1000;text-wrap:nowrap;}
    .toast-message.show{opacity:1}
    .ai-guide{margin-top:10px;padding:12px;border-radius:8px;border:1px solid;color:#555;}
    .guide-gemini{background:#fffde7;border-color:#f9e16c;}
    .guide-chatgpt{background:#e8f5e9;border-color:#c8e6c9;}
    .ai-guide p{margin:0;}
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <a href="link-trang-truoc-cua-ban" class="back-link">
            &larr; V·ªÅ trang tr∆∞·ªõc
        </a>
        <div class="title">B√†i Tr√† Ti√™n Tri</div>
        <div><small id="selected-ai-display" class="small"></small></div>
    </div>

    <div class="content">
        <div class="ai-selector">
            <label>Ch·ªçn AI Gi·∫£i B√†i:</label>
            <div class="ai-toggle">
                <div id="select-gemini" class="ai-option">ü§ñ Gemini</div>
                <div id="select-chatgpt" class="ai-option">üí¨ ChatGPT</div>
            </div>
        </div>
        
        <div class="controls">
            <button id="btn-3">Tr·∫£i B√†i 3 L√°</button>
            <button id="btn-5">Tr·∫£i B√†i 5 L√°</button>
            <button id="btn-7">Tr·∫£i 7 Ng√†y</button>
            <button id="btn-4">Tr·∫£i Theo Th√°ng (4)</button>
            <button id="btn-12">Tr·∫£i Theo NƒÉm (12)</button>
            <button id="btn-deck">Xem to√†n b·ªô b·ªô b√†i (200 l√°)</button>
        </div>

        <div id="result">
            <p style="text-align:center;color:#666">Ch·ªçn ki·ªÉu tr·∫£i b√†i, t·∫≠p trung trong 10 gi√¢y r·ªìi nh·∫≠n th√¥ng ƒëi·ªáp.</p>
        </div>
    </div>
</div>
<div id="toast" class="toast-message"></div>

<script>
/* ---------- D·ªÆ LI·ªÜU: C·∫•u tr√∫c m·ªõi v·ªõi Image URL v√† Keywords ---------- */
const CARDS_DATA = [
    { name: "Angel - Ti√™n n·ªØ", keywords: "B·∫£o v·ªá, May m·∫Øn, L·ªùi khuy√™n", image_url: "images/angel.png" },
    { name: "Ant - Con ki·∫øn", keywords: "ChƒÉm ch·ªâ, Ki√™n tr√¨, C·∫ßn c√π", image_url: "images/ant.png" },
    { name: "Apple - Qu·∫£ t√°o", keywords: "Ki·∫øn th·ª©c, S·ª©c kh·ªèe, C∆° h·ªôi", image_url: "images/apple.png" },
    { name: "Archway - C·ªïng v√≤m", keywords: "Kh·ªüi ƒë·∫ßu m·ªõi, V∆∞·ª£t qua, C·ªôt m·ªëc", image_url: "images/archway.png" },
    { name: "Arrow - M≈©i t√™n", keywords: "M·ª•c ti√™u, H∆∞·ªõng ƒëi, T·ªëc ƒë·ªô", image_url: "images/arrow.png" },
    { name: "Axe - C√¢y r√¨u", keywords: "Ch·∫•m d·ª©t, C·∫Øt ƒë·ª©t, Gi·∫£i quy·∫øt", image_url: "images/axe.png" },
    { name: "Bag - T√∫i", keywords: "T√†i s·∫£n, Thu ho·∫°ch, Ti·ªÅm nƒÉng", image_url: "images/bag.png" },
    { name: "Barrel - Th√πng R·ªóng", keywords: "Thi·∫øu th·ªën, C·∫ßn b·ªï sung, Tr·ªëng r·ªóng", image_url: "images/barrel.png" },
    { name: "Basket - Gi·ªè r∆°m", keywords: "Ph·∫ßn th∆∞·ªüng, Sinh s√¥i, S·ª± phong ph√∫", image_url: "images/basket.png" },
    { name: "Bat - Con d∆°i", keywords: "Nguy hi·ªÉm, C√°i ch·∫øt, Thay ƒë·ªïi l·ªõn", image_url: "images/bat.png" },
    { name: "Bear - Con g·∫•u", keywords: "S·ª©c m·∫°nh, S·ª± b·∫£o v·ªá, Quy·ªÅn l·ª±c", image_url: "images/bear.png" },
    { name: "Beetle - B·ªç c√°nh c·ª©ng", keywords: "B·ªÅn b·ªâ, Chuy·ªÉn h√≥a, H·ªìi ph·ª•c", image_url: "images/beetle.png" },
    { name: "Bell - C√°i chu√¥ng", keywords: "Tin t·ª©c, Th√¥ng b√°o, C·∫£nh b√°o", image_url: "images/bell.png" },
    { name: "Bird Flying - Chim bay", keywords: "T·ª± do, Du l·ªãch, T·∫ßm nh√¨n", image_url: "images/bird_flying.png" },
    { name: "Bird Perched - Chim ƒë·∫≠u", keywords: "·ªîn ƒë·ªãnh, ƒê·ª£i ch·ªù, Suy ng·∫´m", image_url: "images/bird_perched.png" },
    { name: "Boat - Con thuy·ªÅn", keywords: "H√†nh tr√¨nh, Ti·∫øn l√™n, V∆∞·ª£t qua", image_url: "images/boat.png" },
    { name: "Boot - Chi·∫øc ·ªßng", keywords: "B∆∞·ªõc ƒëi, L·∫≠p tr∆∞·ªùng, H√†nh ƒë·ªông", image_url: "images/boot.png" },
    { name: "Bouquet - B√≥ hoa", keywords: "L√£ng m·∫°n, Ni·ªÅm vui, ƒê√≥n nh·∫≠n", image_url: "images/bouquet.png" },
    { name: "Bow - C√°i n∆°", keywords: "Qu√† t·∫∑ng, K·∫øt n·ªëi, H√†i l√≤ng", image_url: "images/bow.png" },
    { name: "Bowl - C√°i ch·∫≠u", keywords: "H·∫°nh ph√∫c gia ƒë√¨nh, Nhu c·∫ßu, ƒê·∫ßy ƒë·ªß", image_url: "images/bowl.png" },
    { name: "Box - C√°i h·ªôp", keywords: "B√≠ m·∫≠t, Ti·ªÅm ·∫©n, C·∫ßn kh√°m ph√°", image_url: "images/box.png" },
    { name: "Bread - B√°nh m√¨", keywords: "Nu√¥i d∆∞·ª°ng, C·∫ßn thi·∫øt, ƒê·ªß ƒë·∫ßy", image_url: "images/bread.png" },
    { name: "Bridge - C√¢y c·∫ßu", keywords: "K·∫øt n·ªëi, Chuy·ªÉn ƒë·ªïi, L·ªëi tho√°t", image_url: "images/bridge.png" },
    { name: "Broken Bridge - C·∫ßu g√£y", keywords: "Th·∫•t b·∫°i, T·∫Øc ngh·∫Ωn, C·∫ßn s·ª≠a ch·ªØa", image_url: "images/broken_bridge.png" },
    { name: "Broken Ring - Chia ly, ch·∫•m d·ª©t", keywords: "K·∫øt th√∫c, Tan v·ª°, ƒêau kh·ªï", image_url: "images/broken_ring.png" },
    { name: "Broken Wishbone - X∆∞∆°ng ƒë√≤n b·ªã g√£y", keywords: "M·∫•t ni·ªÅm tin, Th·∫•t v·ªçng, ∆Ø·ªõc m∆° tan v·ª°", image_url: "images/broken_wishbone.png" },
    { name: "Broom - C√¢y ch·ªïi", keywords: "D·ªçn d·∫πp, Thay ƒë·ªïi, Lo·∫°i b·ªè", image_url: "images/broom.png" },
    { name: "Bull - B√≤ ƒë·ª±c", keywords: "C·ª©ng ƒë·∫ßu, S·ª©c m·∫°nh √Ω ch√≠, Ki√™n ƒë·ªãnh", image_url: "images/bull.png" },
    { name: "Butterfly - Con b∆∞·ªõm", keywords: "Chuy·ªÉn h√≥a, V·∫ª ƒë·∫πp, T·ª± do", image_url: "images/butterfly.png" },
    { name: "Camel - Con l·∫°c ƒë√†", keywords: "Ki√™n nh·∫´n, B·ªÅn b·ªâ, V∆∞·ª£t kh√≥", image_url: "images/camel.png" },
    { name: "Candle - Ng·ªçn n·∫øn", keywords: "√Ånh s√°ng, Ch·ªâ d·∫´n, Tr√≠ tu·ªá", image_url: "images/candle.png" },
    { name: "Cane - G·∫≠y ch·ªëng, batoong", keywords: "H·ªó tr·ª£, L·ªùi khuy√™n ng∆∞·ªùi l·ªõn, B·ªánh t·∫≠t", image_url: "images/cane.png" },
    { name: "Carriage - C·ªó xe th√πng", keywords: "Ti·∫øn tri·ªÉn, Du l·ªãch, Ph∆∞∆°ng ti·ªán", image_url: "images/carriage.png" },
    { name: "Carrot - C·ªß c√† r·ªët", keywords: "Ph·∫ßn th∆∞·ªüng, Th√≠ch th√∫, S·ª©c s·ªëng", image_url: "images/carrot.png" },
    { name: "Casket - Quan t√†i", keywords: "K·∫øt th√∫c, Tang t√≥c, S·ª± t√°i sinh", image_url: "images/casket.png" },
    { name: "Cat - Con m√®o", keywords: "ƒê·ªôc l·∫≠p, X·∫£o quy·ªát, B√≠ ·∫©n", image_url: "images/cat.png" },
    { name: "Caterpillar - Con s√¢u", keywords: "Ph√°t tri·ªÉn, Giai ƒëo·∫°n ƒë·∫ßu, Chuy·ªÉn ƒë·ªïi", image_url: "images/caterpillar.png" },
    { name: "Chain - S·ª£i d√¢y x√≠ch", keywords: "R√†ng bu·ªôc, H√¥n nh√¢n, Tr√°ch nhi·ªám", image_url: "images/chain.png" },
    { name: "Chair Empty - Chi·∫øc gh·∫ø tr·ªëng", keywords: "M·∫•t m√°t, C∆° h·ªôi b·ªã b·ªè l·ª°, C√¥ ƒë∆°n", image_url: "images/chair_empty.png" },
    { name: "Chair Filled - Ng∆∞·ªùi ng·ªìi gh·∫ø", keywords: "Th√†nh c√¥ng, V·ªã th·∫ø, L√£nh ƒë·∫°o", image_url: "images/chair_filled.png" },
    { name: "Claw - M√≥ng vu·ªët", keywords: "N·∫Øm gi·ªØ, Tham lam, Chi·∫øn ƒë·∫•u", image_url: "images/claw.png" },
    { name: "Clouds - ƒê√°m m√¢y", keywords: "M∆° h·ªì, Lo l·∫Øng, Kh√¥ng ch·∫Øc ch·∫Øn", image_url: "images/clouds.png" },
    { name: "Club - C√¢y ch√πy", keywords: "B·∫°o l·ª±c, Xung ƒë·ªôt, S·ª©c m·∫°nh v·∫≠t ch·∫•t", image_url: "images/club.png" },
    { name: "Cobweb - M·∫°ng nh·ªán", keywords: "B·∫´y, S·ª± c≈© k·ªπ, C·∫£m gi√°c b·ªã m·∫Øc k·∫πt", image_url: "images/cobweb.png" },
    { name: "Coins - Ti·ªÅn xu", keywords: "T√†i ch√≠nh, Ti·ªÅn b·∫°c, V·∫≠n may", image_url: "images/coins.png" },
    { name: "Cracked Cup - C·ªëc v·ª°", keywords: "R·∫°n n·ª©t t√¨nh c·∫£m, T·ªïn th∆∞∆°ng, M·∫•t m√°t nh·ªè", image_url: "images/cracked_cup.png" },
    { name: "Crib - C√°i n√¥i", keywords: "Gia ƒë√¨nh, Sinh n·ªü, Kh·ªüi ƒë·∫ßu m·ªõi", image_url: "images/crib.png" },
    { name: "Crown - V∆∞∆°ng mi·ªán", keywords: "Th√†nh c√¥ng, Danh v·ªçng, Vinh quang", image_url: "images/crown.png" },
    { name: "Cup - C√°i t√°ch", keywords: "S·ª± ki·ªán x√£ h·ªôi, May m·∫Øn, ƒê√≥n nh·∫≠n", image_url: "images/cup.png" },
    { name: "Dagger - Dao gƒÉm", keywords: "Ph·∫£n b·ªôi, Nguy hi·ªÉm, C·∫£nh b√°o", image_url: "images/dagger.png" },
    { name: "Dark Man - Ng∆∞·ªùi ƒë√†n √¥ng m√†u ƒëen", keywords: "Ng∆∞·ªùi ƒë√†n √¥ng b√≠ ·∫©n, Ng∆∞·ªùi kh√¥ng ƒë√°ng tin, Th·ª≠ th√°ch", image_url: "images/dark_man.png" },
    { name: "Dark Woman - Ng∆∞·ªùi ph·ª• n·ªØ m√†u ƒëen", keywords: "Ng∆∞·ªùi ph·ª• n·ªØ quy·ªÅn l·ª±c, Ng∆∞·ªùi ki·ªÉm so√°t, Tr·ªü ng·∫°i", image_url: "images/dark_woman.png" },
    { name: "Desk - C√°i b√†n", keywords: "C√¥ng vi·ªác, H·ªçc t·∫≠p, Giao d·ªãch", image_url: "images/desk.png" },
    { name: "Diamond - Kim c∆∞∆°ng", keywords: "Gi√° tr·ªã, ƒê·ªô b·ªÅn, H√¥n nh√¢n vƒ©nh c·ª≠u", image_url: "images/diamond.png" },
    { name: "Dog - 1 ch√∫ ch√≥", keywords: "L√≤ng trung th√†nh, T√¨nh b·∫°n, S·ª± tin c·∫≠y", image_url: "images/dog_1.png" },
    { name: "Dogs - 2 ch√∫ ch√≥", keywords: "ƒê·ªëi t√°c, C√¥ng ty, C·∫°nh tranh l√†nh m·∫°nh", image_url: "images/dog_2.png" },
    { name: "Dog Barking - Ch√≥ s·ªßa", keywords: "Tranh c√£i, C·∫£nh b√°o, Tin ƒë·ªìn", image_url: "images/dog_barking.png" },
    { name: "Dog Close Up - Ch√≥ vui v·∫ª", keywords: "H·∫°nh ph√∫c, ƒê·ªìng h√†nh, Ni·ªÅm vui", image_url: "images/dog_close_up.png" },
    { name: "Dog Far Away - Ch√∫ ch√≥ bu·ªìn b√£", keywords: "Xa c√°ch, L√≤ng trung th√†nh b·ªã th·ª≠ th√°ch, Thi·∫øu b·∫°n b√®", image_url: "images/dog_far_away.png" },
    { name: "Dolphin - C√° heo", keywords: "Tr√≠ tu·ªá, Ni·ªÅm vui, H·ªó tr·ª£ b·∫•t ng·ªù", image_url: "images/dolphin.png" },
    { name: "Door - C√°nh c·ª≠a", keywords: "C∆° h·ªôi, L·ªëi ƒëi m·ªõi, Chuy·ªÉn ƒë·ªïi", image_url: "images/door.png" },
    { name: "Dragon - Con r·ªìng", keywords: "S·ª©c m·∫°nh phi th∆∞·ªùng, Gi√†u c√≥, Nguy hi·ªÉm l·ªõn", image_url: "images/dragon.png" },
    { name: "Eagle - Con chim ∆∞ng", keywords: "T·∫ßm nh√¨n xa, Vinh quang, Quy·ªÅn l·ª±c t·ªëi cao", image_url: "images/eagle.png" },
    { name: "Ear - C√°i tai", keywords: "L·∫Øng nghe, Tin t·ª©c, B√≠ m·∫≠t", image_url: "images/ear.png" },
    { name: "Egg - Qu·∫£ tr·ª©ng", keywords: "Ti·ªÅm nƒÉng, Sinh s√¥i, D·ª± √°n m·ªõi", image_url: "images/egg.png" },
    { name: "Elephant - Con voi", keywords: "K√Ω ·ª©c, Tr√≠ tu·ªá, S·ª©c m·∫°nh b·ªÅn b·ªâ", image_url: "images/elephant.png" },
    { name: "Eye - Con m·∫Øt", keywords: "Quan s√°t, C·∫£nh b√°o, Ghen t·ªã", image_url: "images/eye.png" },
    { name: "Fair Man - Ng∆∞·ªùi ƒë√†n √¥ng s√°ng m√†u", keywords: "Ng∆∞·ªùi ƒë√†n √¥ng t·ªët, H·ªó tr·ª£, NƒÉng l∆∞·ª£ng t√≠ch c·ª±c", image_url: "images/fair_man.png" },
    { name: "Fair Woman - Ng∆∞·ªùi ph·ª• n·ªØ s√°ng m√†u", keywords: "Ng∆∞·ªùi ph·ª• n·ªØ t·ªët, L·ªùi khuy√™n, H·∫°nh ph√∫c", image_url: "images/fair_woman.png" },
    { name: "Fan - Qu·∫°t", keywords: "Ti·∫øt l·ªô, X√£ h·ªôi, H√†i l√≤ng", image_url: "images/fan.png" },
    { name: "Feather - L√¥ng v≈©", keywords: "Nh·∫π nh√†ng, Du l·ªãch, M·∫•t m√°t nh·ªè", image_url: "images/feather.png" },
    { name: "Finger - Ng√≥n tay", keywords: "Ch·ªâ d·∫´n, Tr√°ch nhi·ªám, ƒêi·ªÉm y·∫øu", image_url: "images/finger.png" },
    { name: "Fire - Ng·ªçn l·ª≠a", keywords: "ƒêam m√™, C∆°n th·ªãnh n·ªô, S·ª± h·ªßy di·ªát", image_url: "images/fire.png" },
    { name: "Firecracker - Ph√°o hoa n·ªï", keywords: "ƒÇn m·ª´ng, K√≠ch ƒë·ªông, B√πng n·ªï c·∫£m x√∫c", image_url: "images/firecracker.png" },
    { name: "Flag - L√° c·ªù", keywords: "Qu·ªëc gia, Quy·ªÅn l·ª±c, Bi·ªÉu t∆∞·ª£ng", image_url: "images/flag.png" },
    { name: "Flowers - Hoa n·ªü", keywords: "Vui v·∫ª, T√¨nh y√™u, Ph√°t tri·ªÉn", image_url: "images/flowers.png" },
    { name: "Flute - √îng s√°o", keywords: "H√≤a b√¨nh, Ngh·ªá thu·∫≠t, Th∆∞ gi√£n", image_url: "images/flute.png" },
    { name: "Fly - Con ru·ªìi", keywords: "Phi·ªÅn to√°i, V·∫•n ƒë·ªÅ nh·ªè, C·∫£m th·∫•y kh√≥ ch·ªãu", image_url: "images/fly.png" },
    { name: "Forest - Khu r·ª´ng", keywords: "M∆° h·ªì, L·∫°c l·ªëi, C·∫ßn t√¨m ƒë∆∞·ªùng", image_url: "images/forest.png" },
    { name: "Four Leaf Clover - C·ªè 4 l√°", keywords: "May m·∫Øn tuy·ªát ƒë·ªëi, C∆° h·ªôi, H·∫°nh ph√∫c", image_url: "images/four_leaf_clover.png" },
    { name: "Fox - Con c√°o", keywords: "X·∫£o quy·ªát, L·ª´a d·ªëi, Kh√¥n ngoan", image_url: "images/fox.png" },
    { name: "Frying Pan - C√°i ch·∫£o", keywords: "M√¢u thu·∫´n gia ƒë√¨nh, C·∫£m x√∫c m·∫°nh, N√≥ng n·∫£y", image_url: "images/frying_pan.png" },
    { name: "Funnel - C√°i ph·ªÖu", keywords: "T·∫≠p trung, Ki·ªÉm so√°t d√≤ng ch·∫£y, Chi ti·∫øt", image_url: "images/funnel.png" },
    { name: "Gavel - C√°i b√∫a", keywords: "Ph√°n quy·∫øt, Ph√°p lu·∫≠t, Quy·ªÅn l·ª±c ch√≠nh th·ª©c", image_url: "images/gavel.png" },
    { name: "Gong - C√°i chi√™ng", keywords: "Th√¥ng b√°o quan tr·ªçng, S·ª± ki·ªán l·ªõn, L·ªùi k√™u g·ªçi", image_url: "images/gong.png" },
    { name: "Goldfish - C√° v√†ng", keywords: "Ph√π phi·∫øm, Vui v·∫ª, L√£ng m·∫°n", image_url: "images/goldfish.png" },
    { name: "Grapes - Ch√πm nho", keywords: "L·ªÖ h·ªôi, Th·ªãnh v∆∞·ª£ng, H√†i l√≤ng", image_url: "images/grapes.png" },
    { name: "Grasshopper - Con c√†o c√†o", keywords: "B·∫•t c·∫©n, Nh·∫£y v·ªçt, C·∫ßn h√†nh ƒë·ªông", image_url: "images/grasshopper.png" },
    { name: "Hammock - C√°i v√µng", keywords: "Ngh·ªâ ng∆°i, L∆∞·ªùi bi·∫øng, Th∆∞ gi√£n", image_url: "images/hammock.png" },
    { name: "Hand - B√†n tay", keywords: "H√†nh ƒë·ªông, S·ª©c lao ƒë·ªông, H·ª£p t√°c", image_url: "images/hand.png" },
    { name: "Handshake - B·∫Øt tay", keywords: "Th·ªèa thu·∫≠n, H·ª£p t√°c, H√≤a gi·∫£i", image_url: "images/handshake.png" },
    { name: "Harp - ƒê√†n h·∫°c", keywords: "Ngh·ªá thu·∫≠t, H√≤a b√¨nh, T√¨nh y√™u", image_url: "images/harp.png" },
    { name: "Hat - C√°i m≈©", keywords: "Che gi·∫•u, Vai tr√≤ m·ªõi, Danh t√≠nh", image_url: "images/hat.png" },
    { name: "Haystack - R∆°m c·ªè kh√¥", keywords: "Kh√≥ khƒÉn, C·∫ßn t√¨m ki·∫øm chi ti·∫øt, V·∫•t v·∫£", image_url: "images/haystack.png" },
    { name: "Heart - Tr√°i tim", keywords: "T√¨nh y√™u, C·∫£m x√∫c, ƒêam m√™", image_url: "images/heart.png" },
    { name: "Hills - Ng·ªçn ƒë·ªìi", keywords: "Th·ª≠ th√°ch nh·ªè, Ti·∫øn b·ªô ch·∫≠m, Ki√™n nh·∫´n", image_url: "images/hills.png" },
    { name: "Horse - Con ng·ª±a", keywords: "S·ª©c m·∫°nh, NƒÉng l∆∞·ª£ng, T·ªëc ƒë·ªô", image_url: "images/horse.png" },
    { name: "Horseshoe - M√≥ng ng·ª±a", keywords: "May m·∫Øn, B·∫£o v·ªá, V·∫≠n may l·ªõn", image_url: "images/horseshoe.png" },
    { name: "Inkpot - B√¨nh m·ª±c", keywords: "T√†i li·ªáu, Vi·∫øt l√°ch, Ph√°p l√Ω", image_url: "images/inkpot.png" },
    { name: "Jug - C√°i b√¨nh", keywords: "S·ª± h√†o ph√≥ng, ƒê·∫ßy ƒë·ªß, N∆∞·ªõc m·∫Øt", image_url: "images/jug.png" },
    { name: "Kangaroo - Chu·ªôt t√∫i", keywords: "B·∫£o v·ªá gia ƒë√¨nh, Nhanh nh·∫πn, Di chuy·ªÉn nhanh", image_url: "images/kangaroo.png" },
    { name: "Key - Ch√¨a kh√≥a", keywords: "Gi·∫£i ph√°p, M·ªü c·ª≠a, B√≠ m·∫≠t ƒë∆∞·ª£c ti·∫øt l·ªô", image_url: "images/key.png" },
    { name: "Kite - Con di·ªÅu", keywords: "∆Ø·ªõc m∆°, Bay cao, T·∫ßm nh√¨n", image_url: "images/kite.png" },
    { name: "Knot - N√∫t th·∫Øt", keywords: "V·∫•n ƒë·ªÅ, Kh√≥ khƒÉn, R√†ng bu·ªôc", image_url: "images/knot.png" },
    { name: "Ladder - B·∫≠c thang", keywords: "Ti·∫øn b·ªô, ThƒÉng ti·∫øn, V∆∞·ª£t qua", image_url: "images/ladder.png" },
    { name: "Leg - Ch√¢n", keywords: "Ti·∫øn l√™n, H∆∞·ªõng ƒëi, T√≠nh ƒë·ªôc l·∫≠p", image_url: "images/leg.png" },
    { name: "Lightning - Tia ch·ªõp", keywords: "Thay ƒë·ªïi ƒë·ªôt ng·ªôt, Khai s√°ng, Nguy hi·ªÉm", image_url: "images/lightning.png" },
    { name: "Lily - Hoa lily", keywords: "S·ª± tinh khi·∫øt, H·∫°nh ph√∫c, H√≤a b√¨nh", image_url: "images/lily.png" },
    { name: "Lion - S∆∞ t·ª≠", keywords: "Quy·ªÅn l·ª±c, D≈©ng c·∫£m, L√£nh ƒë·∫°o", image_url: "images/lion.png" },
    { name: "Lobster - Con t√¥m", keywords: "Nh·∫°y c·∫£m, C·∫ßn b·∫£o v·ªá, K√Ω ·ª©c c≈©", image_url: "images/lobster.png" },
    { name: "Man - Ng∆∞·ªùi ƒë√†n √¥ng", keywords: "NƒÉng l∆∞·ª£ng nam t√≠nh, H√†nh ƒë·ªông, Ng∆∞·ªùi ƒë√†n √¥ng quan tr·ªçng", image_url: "images/man.png" },
    { name: "Mice - Con chu·ªôt", keywords: "M·∫•t m√°t, Phi·ªÅn ph·ª©c nh·ªè, L√©n l√∫t", image_url: "images/mice.png" },
    { name: "Money Path - Con ƒë∆∞·ªùng ti·ªÅn", keywords: "C∆° h·ªôi t√†i ch√≠nh, Con ƒë∆∞·ªùng s·ª± nghi·ªáp, Thu nh·∫≠p", image_url: "images/money_path.png" },
    { name: "Moon - M·∫∑t trƒÉng", keywords: "B√≠ ·∫©n, C·∫£m x√∫c, Tr·ª±c gi√°c", image_url: "images/moon.png" },
    { name: "Mountain - Ng·ªçn n√∫i", keywords: "Th√°ch th·ª©c l·ªõn, Kh√≥ khƒÉn, M·ª•c ti√™u", image_url: "images/mountain.png" },
    { name: "Mountain Road - ƒê∆∞·ªùng l√™n n√∫i", keywords: "Kh√≥ khƒÉn nh∆∞ng ƒë√°ng gi√°, Ti·∫øn l√™n, V·∫•t v·∫£", image_url: "images/mountain_road.png" },
    { name: "Mule - Con l·ª´a", keywords: "C·ª©ng ƒë·∫ßu, G√°nh n·∫∑ng, C√¥ng vi·ªác c·ª±c nh·ªçc", image_url: "images/mule.png" },
    { name: "Needle & Thread - Kim ch·ªâ", keywords: "S·ª≠a ch·ªØa, Kh·∫Øc ph·ª•c, Chi ti·∫øt nh·ªè", image_url: "images/needle_thread.png" },
    { name: "Nest - T·ªï chim", keywords: "Gia ƒë√¨nh, Ng√¥i nh√†, Sinh n·ªü", image_url: "images/nest.png" },
    { name: "Older Man - Ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi", keywords: "L·ªùi khuy√™n, Kinh nghi·ªám, Quy·ªÅn l·ª±c gia ƒë√¨nh", image_url: "images/older_man.png" },
    { name: "Older Woman - Ng∆∞·ªùi ph·ª• n·ªØ l·ªõn tu·ªïi", keywords: "S·ª± th√¥ng th√°i, H·ªó tr·ª£, B√≠ m·∫≠t gia ƒë√¨nh", image_url: "images/older_woman.png" },
    { name: "Owl - Con c√∫", keywords: "Tr√≠ tu·ªá, H·ªçc v·∫•n, Quan s√°t", image_url: "images/owl.png" },
    { name: "Pail - Th√πng n∆∞·ªõc", keywords: "C·∫£m x√∫c ch·ª©a ƒë·ª±ng, Ngu·ªìn thu, S·ª± ƒë·ªï v·ª°", image_url: "images/pail.png" },
    { name: "Parrot - Con v·∫πt", keywords: "Tin ƒë·ªìn, L·ªùi n√≥i d·ªëi, L·∫∑p l·∫°i", image_url: "images/parrot.png" },
    { name: "Peacock - Con c√¥ng", keywords: "Ph√π phi·∫øm, V·∫ª ƒë·∫πp, T·ª± h√†o", image_url: "images/peacock.png" },
    { name: "Pig - Con l·ª£n", keywords: "Tham lam, V·∫≠n may, Th·ª´a th√£i", image_url: "images/pig.png" },
    { name: "Pin - ƒêinh ghim", keywords: "V·∫•n ƒë·ªÅ nh·ªè, C·∫ßn ch√∫ √Ω, T·ªïn th∆∞∆°ng", image_url: "images/pin.png" },
    { name: "Pineapple - Qu·∫£ d·ª©a", keywords: "Ch√†o ƒë√≥n, Th·ªãnh v∆∞·ª£ng, L·ªÖ h·ªôi", image_url: "images/pineapple.png" },
    { name: "Purse - T√∫i ti·ªÅn", keywords: "Ti·ªÅn b·∫°c, Chi ti√™u, Kh·∫£ nƒÉng", image_url: "images/purse.png" },
    { name: "Quill - B√∫t l√¥ng ng·ªóng", keywords: "Th∆∞ t·ª´, H·ª£p ƒë·ªìng, Giao ti·∫øp", image_url: "images/quill.png" },
    { name: "Rabbit - Con th·ªè", keywords: "Sinh s√¥i, Nhanh nh·∫πn, S·ª£ h√£i", image_url: "images/rabbit.png" },
    { name: "Rainbow - C·∫ßu v·ªìng", keywords: "Hy v·ªçng, H·∫°nh ph√∫c, Ph·∫ßn th∆∞·ªüng", image_url: "images/rainbow.png" },
    { name: "Ram - C·ª´u ƒë·ª±c", keywords: "S·ª©c m·∫°nh, Kh·ªüi ƒë·∫ßu m·ªõi, Quy·∫øt t√¢m", image_url: "images/ram.png" },
    { name: "Rat - Chu·ªôt ƒë·ªìng", keywords: "L·ª´a d·ªëi, K·∫ª tr·ªôm, M·∫•t m√°t", image_url: "images/rat.png" },
    { name: "Ring - Chi·∫øc nh·∫´n", keywords: "H√¥n nh√¢n, Cam k·∫øt, V√≤ng l·∫∑p", image_url: "images/ring.png" },
    { name: "Rooster - G√† tr·ªëng", keywords: "Th·ª©c t·ªânh, Tin t·ª©c, S·ª± t·ª± tin", image_url: "images/rooster.png" },
    { name: "Rose - Hoa h·ªìng", keywords: "T√¨nh y√™u, V·∫ª ƒë·∫πp, ƒêau kh·ªï", image_url: "images/rose.png" },
    { name: "Scales - C√°n c√¢n", keywords: "C√¥ng b·∫±ng, Ph√°p lu·∫≠t, Quy·∫øt ƒë·ªãnh", image_url: "images/scales.png" },
    { name: "Scissors - C·∫Øt ƒë·ª©t m·ªëi quan h·ªá", keywords: "Chia tay, Ch·∫•m d·ª©t, Quy·∫øt ƒë·ªãnh nhanh", image_url: "images/scissors.png" },
    { name: "Sea Horse - C√° ng·ª±a", keywords: "T√¨nh y√™u chung th·ªßy, S√°ng t·∫°o, Ki√™n nh·∫´n", image_url: "images/sea_horse.png" },
    { name: "Shark - C√° m·∫≠p", keywords: "Nguy hi·ªÉm l·ªõn, K·∫ª th√π m·∫°nh, Th√°ch th·ª©c", image_url: "images/shark.png" },
    { name: "Shield - C√°i khi√™n", keywords: "B·∫£o v·ªá, Ph√≤ng th·ªß, C·∫©n th·∫≠n", image_url: "images/shield.png" },
    { name: "Skull - ƒê·∫ßu l√¢u", keywords: "C√°i ch·∫øt, S·ª± k·∫øt th√∫c, T√°i sinh", image_url: "images/skull.png" },
    { name: "Spear - Ng·ªçn gi√°o", keywords: "Chi·∫øn ƒë·∫•u, T·∫≠p trung, M·ª•c ti√™u r√µ r√†ng", image_url: "images/spear.png" },
    { name: "Staff - H·ªó tr·ª£, ch·ªâ d·∫´n", keywords: "Quy·ªÅn l·ª±c, Gi√∫p ƒë·ª°, L·ªùi khuy√™n", image_url: "images/staff.png" },
    { name: "Star - Ng√¥i sao", keywords: "Hy v·ªçng, ∆Ø·ªõc nguy·ªán, May m·∫Øn", image_url: "images/star.png" },
    { name: "Stork - Con c√≤", keywords: "Di chuy·ªÉn, Sinh n·ªü, Thay ƒë·ªïi nh√† c·ª≠a", image_url: "images/stork.png" },
    { name: "Sun - M·∫∑t tr·ªùi", keywords: "H·∫°nh ph√∫c, Th√†nh c√¥ng, S·ª©c s·ªëng", image_url: "images/sun.png" },
    { name: "Sunrise - B√¨nh minh", keywords: "Kh·ªüi ƒë·∫ßu m·ªõi, Hy v·ªçng, S·ª± r√µ r√†ng", image_url: "images/sunrise.png" },
    { name: "Table - C√°i b√†n", keywords: "Giao ti·∫øp, H·ªôi h·ªçp, Th·∫£o lu·∫≠n", image_url: "images/table.png" },
    { name: "Tankard - C·ªëc v·∫°i", keywords: "L·ªÖ h·ªôi, U·ªëng r∆∞·ª£u, Vui v·∫ª", image_url: "images/tankard.png" },
    { name: "Target - Bia b·∫Øn", keywords: "M·ª•c ti√™u, S·ª± ch√≠nh x√°c, K·∫øt qu·∫£", image_url: "images/target.png" },
    { name: "Teapot - B√¨nh tr√†", keywords: "B·∫°n b√®, Giao ti·∫øp, Cu·ªôc h·∫πn", image_url: "images/teapot.png" },
    { name: "Teardrops - Gi·ªçt n∆∞·ªõc m·∫Øt", keywords: "Bu·ªìn b√£, N·ªói ƒëau, Thanh l·ªçc c·∫£m x√∫c", image_url: "images/teardrops.png" },
    { name: "Tent - C√°i l·ªÅu", keywords: "Du l·ªãch, T·∫°m th·ªùi, C·∫ßn thay ƒë·ªïi", image_url: "images/tent.png" },
    { name: "Throne - Ngai v√†ng", keywords: "Quy·ªÅn l·ª±c, V·ªã th·∫ø, T·ª± cao", image_url: "images/throne.png" },
    { name: "Tiger - Con h·ªï", keywords: "S·ª©c m·∫°nh hoang d√£, ƒêam m√™, Nguy hi·ªÉm", image_url: "images/tiger.png" },
    { name: "Torch - Ng·ªçn ƒëu·ªëc", keywords: "Khai s√°ng, S·ª± th·∫≠t, H∆∞·ªõng d·∫´n", image_url: "images/torch.png" },
    { name: "Tortoise - Con r√πa", keywords: "Ch·∫≠m nh∆∞ng ch·∫Øc, Ki√™n nh·∫´n, Tu·ªïi th·ªç", image_url: "images/tortoise.png" },
    { name: "Tower - To√† th√°p", keywords: "C√¥ ƒë∆°n, T·ª± b·∫£o v·ªá, M·ª•c ti√™u cao", image_url: "images/tower.png" },
    { name: "Tree - C√¢y", keywords: "S·ª©c s·ªëng, ·ªîn ƒë·ªãnh, Ph√°t tri·ªÉn", image_url: "images/tree.png" },
    { name: "Tulip - Hoa tulip", keywords: "T√¨nh y√™u ƒë√≠ch th·ª±c, V·∫ª ƒë·∫πp, S·ª± mong mu·ªën", image_url: "images/tulip.png" },
    { name: "Turkey - G√† t√¢y", keywords: "L·ªÖ h·ªôi, T·ª± h√†o, H·∫°nh ph√∫c", image_url: "images/turkey.png" },
    { name: "Unicorn - K·ª≥ l√¢n", keywords: "May m·∫Øn hi·∫øm c√≥, K·ª≥ di·ªáu, S·ª± thu·∫ßn khi·∫øt", image_url: "images/unicorn.png" },
    { name: "V - Ch·ªØ V", keywords: "Chi·∫øn th·∫Øng, L·ª±a ch·ªçn, Chia c·∫Øt", image_url: "images/v.png" },
    { name: "Valley - Thung l≈©ng", keywords: "Th∆∞ gi√£n, N∆°i ·∫©n n√°u, D·ªÖ ch·ªãu", image_url: "images/valley.png" },
    { name: "Vase - L·ªç hoa", keywords: "V·∫ª ƒë·∫πp, T√¨nh y√™u, C·∫£m x√∫c", image_url: "images/vase.png" },
    { name: "Vine - C√†nh nho xanh", keywords: "Ph√°t tri·ªÉn, K·∫øt n·ªëi, Th·ªãnh v∆∞·ª£ng", image_url: "images/vine.png" },
    { name: "Vulture - Con k·ªÅn k·ªÅn", keywords: "M·∫•t m√°t, K·∫ª sƒÉn m·ªìi, Thanh l·ªçc", image_url: "images/vulture.png" },
    { name: "Wall - B·ª©c t∆∞·ªùng", keywords: "R√†o c·∫£n, B·∫£o v·ªá, C·∫ßn ph√° v·ª°", image_url: "images/wall.png" },
    { name: "Wedge - C√°i n√™m", keywords: "Chia r·∫Ω, Can thi·ªáp, √Åp l·ª±c", image_url: "images/wedge.png" },
    { name: "Weeping Willow - C√¢y d∆∞∆°ng li·ªÖu", keywords: "Bu·ªìn b√£, M·∫•t m√°t, S·ª± nh·∫°y c·∫£m", image_url: "images/weeping_willow.png" },
    { name: "Well - C√°i gi·∫øng", keywords: "∆Ø·ªõc nguy·ªán, Ngu·ªìn l·ª±c, Kh√°m ph√°", image_url: "images/well.png" },
    { name: "Whale - C√° voi", keywords: "S·ª©c m·∫°nh c·∫£m x√∫c, S·ª± s√¢u s·∫Øc, B√≠ ·∫©n", image_url: "images/whale.png" },
    { name: "Wheel - B√°nh xe", keywords: "Thay ƒë·ªïi, V√≤ng quay, V·∫≠n may", image_url: "images/wheel.png" },
    { name: "Windchimes - Chu√¥ng gi√≥", keywords: "H√†i h√≤a, √Çm nh·∫°c, Thay ƒë·ªïi nh·ªè", image_url: "images/windchimes.png" },
    { name: "Wishbone - X∆∞∆°ng ƒë√≤n", keywords: "∆Ø·ªõc m∆°, Hy v·ªçng, S·ª± l·ª±a ch·ªçn", image_url: "images/wishbone.png" },
    { name: "Woman - Ng∆∞·ªùi ph·ª• n·ªØ", keywords: "NƒÉng l∆∞·ª£ng n·ªØ t√≠nh, S√°ng t·∫°o, Ng∆∞·ªùi ph·ª• n·ªØ quan tr·ªçng", image_url: "images/woman.png" },
    { name: "Wreath - V√≤ng hoa", keywords: "Vinh quang, Chi·∫øn th·∫Øng, S·ª± k·∫øt th√∫c", image_url: "images/wreath.png" },
    { name: "Yoke - S·ª± r√†ng bu·ªôc", keywords: "Tr√°ch nhi·ªám, S·ª± √©p bu·ªôc, Lao ƒë·ªông", image_url: "images/yoke.png" },
    { name: "Younger Man - Ng∆∞·ªùi ƒë√†n √¥ng tr·∫ª tu·ªïi", keywords: "NƒÉng l∆∞·ª£ng m·ªõi, Nhanh nh·∫πn, C∆° h·ªôi m·ªõi", image_url: "images/younger_man.png" },
    { name: "Younger Woman - Ng∆∞·ªùi ph·ª• n·ªØ tr·∫ª tu·ªïi", keywords: "T√¨nh y√™u m·ªõi, S·ª± ng√¢y th∆°, C·∫£m x√∫c m·ªõi", image_url: "images/younger_woman.png" },
    
    // C√°c l√° b√†i li√™n quan ƒë·∫øn th·ªùi gian v√† kh√°i ni·ªám
    { name: "January - Th√°ng 1", keywords: "Kh·ªüi ƒë·∫ßu, K·∫ø ho·∫°ch, L·∫°nh l·∫Ωo", image_url: "images/january.png" },
    { name: "February - Th√°ng 2", keywords: "T√¨nh y√™u, S·ª± mong ƒë·ª£i, C·∫ßn ki√™n nh·∫´n", image_url: "images/february.png" },
    { name: "March - Th√°ng 3", keywords: "H√†nh ƒë·ªông, S·ª©c s·ªëng, Thay ƒë·ªïi ƒë·ªôt ng·ªôt", image_url: "images/march.png" },
    { name: "April - Th√°ng 4", keywords: "Ph√°t tri·ªÉn, T√¨nh y√™u, L√£ng m·∫°n", image_url: "images/april.png" },
    { name: "May - Th√°ng 5", keywords: "Th√†nh c√¥ng, H·∫°nh ph√∫c, Thu ho·∫°ch", image_url: "images/may.png" },
    { name: "June - Th√°ng 6", keywords: "H√¥n nh√¢n, S√°ng t·∫°o, ƒêam m√™", image_url: "images/june.png" },
    { name: "July - Th√°ng 7", keywords: "Nhi·ªát huy·∫øt, Du l·ªãch, T·ª± do", image_url: "images/july.png" },
    { name: "August - Th√°ng 8", keywords: "Thu ho·∫°ch, Ti·ªÅn b·∫°c, L·ªÖ h·ªôi", image_url: "images/august.png" },
    { name: "September - Th√°ng 9", keywords: "H·ªçc t·∫≠p, S·∫Øp x·∫øp, B·∫Øt ƒë·∫ßu c√¥ng vi·ªác", image_url: "images/september.png" },
    { name: "October - Th√°ng 10", keywords: "Thay ƒë·ªïi, Phong ph√∫, C√¢n b·∫±ng", image_url: "images/october.png" },
    { name: "November - Th√°ng 11", keywords: "B√≠ ·∫©n, Suy ng·∫´m, H·ªìi t∆∞·ªüng", image_url: "images/november.png" },
    { name: "December - Th√°ng 12", keywords: "K·∫øt th√∫c, K·ª∑ ni·ªám, Gia ƒë√¨nh", image_url: "images/december.png" },
    { name: "Career - S·ª± nghi·ªáp", keywords: "Th√†nh t·ª±u c√¥ng vi·ªác, V·ªã th·∫ø, M·ª•c ti√™u", image_url: "images/career.png" },
    { name: "Marriage - H√¥n nh√¢n", keywords: "Cam k·∫øt, ƒê·ªëi t√°c, Quan h·ªá l√¢u d√†i", image_url: "images/marriage.png" },
    { name: "Happiness - H·∫°nh Ph√∫c", keywords: "Ni·ªÅm vui, H√†i l√≤ng, C·∫£m x√∫c t√≠ch c·ª±c", image_url: "images/happiness.png" },
    { name: "Love - T√¨nh y√™u", keywords: "L√£ng m·∫°n, ƒêam m√™, S·ª± k·∫øt n·ªëi", image_url: "images/love.png" },
    { name: "Success - Th√†nh c√¥ng", keywords: "Vinh quang, K·∫øt qu·∫£ t·ªët, ƒê∆∞·ª£c c√¥ng nh·∫≠n", image_url: "images/success.png" },
    { name: "Wealth - T√†i ch√≠nh", keywords: "Gi√†u c√≥, Ti·ªÅn b·∫°c, T√†i s·∫£n", image_url: "images/wealth.png" }
];
const ALL_CARDS = CARDS_DATA.map(c => c.name); // M·∫£ng t√™n l√° b√†i c≈© ƒë·ªÉ t∆∞∆°ng th√≠ch v·ªõi logic c≈©

/* Khai b√°o c·∫•u h√¨nh AI */
const AI_CONFIG = {
    'gemini': {
        name: 'Gemini',
        url: 'https://gemini.google.com/',
        color: '#007aff',
        guide_class: 'guide-gemini'
    },
    'chatgpt': {
        name: 'ChatGPT',
        url: 'https://chatgpt.com',
        color: '#28a745',
        guide_class: 'guide-chatgpt'
    }
};

let selectedAI = localStorage.getItem('selectedAI') || 'gemini'; // L·∫•y t·ª´ Local Storage

/* fallback random, drawUnique... (gi·ªØ nguy√™n) */
function secureRandom(max){
    try {
        if (window.crypto && window.crypto.getRandomValues) {
            const arr = new Uint32Array(1);
            window.crypto.getRandomValues(arr);
            return arr[0] % max;
        }
    } catch(e){
        return Math.floor(Math.random()*max);
    }
    return Math.floor(Math.random()*max);
}

function drawUnique(count, deck){
    const drawn = [];
    const idxs = Array.from(deck.keys());
    for (let i=0;i<count;i++){
        if (idxs.length===0) break;
        const r = secureRandom(idxs.length);
        const ix = idxs.splice(r,1)[0];
        drawn.push(deck[ix]);
    }
    return drawn;
}

/* -------------------- CH·ª®C NƒÇNG COPY & AI -------------------- */
// ... (copyToClipboard, fallbackCopy, showToast, showError gi·ªØ nguy√™n) ...
function copyToClipboard(text){
    return new Promise((resolve, reject) => {
        if (navigator.clipboard) {
            navigator.clipboard.writeText(text).then(() => {
                resolve();
            }).catch(err => {
                fallbackCopy(text);
                resolve(); 
            });
        } else {
            fallbackCopy(text);
            resolve(); 
        }
    });
}

function fallbackCopy(text) {
    const textArea = document.createElement("textarea");
    textArea.value = text;
    textArea.style.position = "fixed";
    textArea.style.opacity = "0";
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    try {
        document.execCommand('copy');
    } catch (err) {
        console.error('Fallback copy failed', err);
    }
    document.body.removeChild(textArea);
}

function showToast(message) {
    const toast = document.getElementById('toast');
    toast.textContent = message;
    toast.classList.add('show');
    setTimeout(() => {
        toast.classList.remove('show');
    }, 3000);
}

const resultEl = document.getElementById('result');

function showError(msg){
    resultEl.innerHTML = `<div class="error"><strong>L·ªói:</strong> ${msg}</div>`;
}

function showHtml(html){
    const guide = document.querySelector('.ai-guide');
    if (guide) guide.remove();
    resultEl.innerHTML = html;
}

// H√†m kh·ªüi t·∫°o v√† x·ª≠ l√Ω vi·ªác m·ªü AI Chat
function openAIChat(copyText) {
    const config = AI_CONFIG[selectedAI];

    copyToClipboard(copyText).then(() => {
        showToast(`ƒê√£ sao ch√©p! ƒêang m·ªü ${config.name}...`);

        const guideHTML = `
            <div class="ai-guide ${config.guide_class}">
                <p><strong>üö® H∆Ø·ªöNG D·∫™N ${config.name.toUpperCase()}:</strong></p>
                <p>1. N·ªôi dung tr·∫£i b√†i ƒë√£ ƒë∆∞·ª£c t·ª± ƒë·ªông sao ch√©p (copy).</p>
                <p>2. Vui l√≤ng b·∫•m v√†o <a href="${config.url}" target="_blank">ƒê√ÇY</a> ƒë·ªÉ m·ªü **${config.name}**.</p>
                <p>3. Sau khi ${config.name} m·ªü, vui l√≤ng <strong>D√ÅN (paste)</strong> n·ªôi dung tr·∫£i b√†i v√†o khung chat.</p>
                <p>4. Y√™u c·∫ßu AI gi·∫£i nghƒ©a: <strong>"H√£y gi·∫£i b√†i ti√™n tri Tr√† Ti√™n Tri n√†y cho t√¥i v√† ƒë∆∞a ra l·ªùi khuy√™n chi ti·∫øt."</strong></p>
            </div>
        `;
        
        const existingGuide = resultEl.querySelector('.ai-guide');
        if (existingGuide) existingGuide.remove();
        resultEl.insertAdjacentHTML('beforeend', guideHTML);

        setTimeout(() => {
            window.open(config.url, '_blank');
        }, 500); 
    }).catch(err => {
        showError("Kh√¥ng th·ªÉ sao ch√©p ƒë·ªÉ m·ªü AI. Vui l√≤ng th·ª≠ l·∫°i.");
    });
}

/* -------------------- LOGIC R√öT B√ÄI & HI·ªÇN TH·ªä -------------------- */

// T√¨m d·ªØ li·ªáu ƒë·∫ßy ƒë·ªß c·ªßa m·ªôt l√° b√†i
function getCardData(name) {
    return CARDS_DATA.find(c => c.name === name);
}

function displaySpread(title, drawnCards){
    try {
        const positions = {
            3: ["L√° 1: Qu√° kh·ª© / G·ªëc r·ªÖ","L√° 2: Hi·ªán t·∫°i / T√¨nh h√¨nh","L√° 3: T∆∞∆°ng lai / Ti·ªÅm nƒÉng"],
            5: ["L√° 1: T√¨nh hu·ªëng c·ªët l√µi","L√° 2: Th√°ch th·ª©c","L√° 3: L·ªùi khuy√™n","L√° 4: ·∫¢nh h∆∞·ªüng t·ª´ b√™n ngo√†i","L√° 5: K·∫øt qu·∫£ cu·ªëi c√πng"]
        };
        const config = AI_CONFIG[selectedAI];
        
        let copyText = `Y√äU C·∫¶U: H√£y gi·∫£i nghƒ©a chi ti·∫øt v√† ƒë∆∞a ra l·ªùi khuy√™n d·ª±a tr√™n tr·∫£i b√†i ti√™n tri n√†y:\n--- ${title} ---\n`;
        let html = `<div class="spread-title">${title}</div><ul class="card-list">`;
        
        drawnCards.forEach((cardName,i)=>{
            const card = getCardData(cardName);
            const label = positions[drawnCards.length] ? positions[drawnCards.length][i] : `L√° ${i+1}`;
            
            html += `<li>
                        <div class="card-title">${label}:</div>
                        <div class="card-info">
                            <img src="${card.image_url}" alt="${card.name}" class="card-img" onerror="this.style.display='none'">
                            <div>
                                <strong>${card.name}</strong>
                                <div class="card-keywords">${card.keywords}</div>
                            </div>
                        </div>
                    </li>`;
            copyText += `${label}: ${card.name} (${card.keywords})\n`; 
        });
        
        html += `</ul>
                 <div class="actions">
                     <button id="btn-redo">üîÅ R√∫t l·∫°i</button>
                     <button id="btn-show-deck">üìö Xem b·ªô b√†i</button>
                     <button id="btn-copy" class="btn-copy">üíæ Ch·ªâ Copy Text</button>
                     <button id="btn-ai" class="btn-ai" style="background:${config.color}">ü§ñ H·ªèi ${config.name}</button>
                 </div>`;
        showHtml(html);
        
        document.getElementById('btn-redo').addEventListener('click', ()=>{ location.reload(); });
        document.getElementById('btn-show-deck').addEventListener('click', showFullDeck);
        document.getElementById('btn-copy').addEventListener('click', () => copyToClipboard(copyText).then(() => showToast("ƒê√£ sao ch√©p!")));
        document.getElementById('btn-ai').addEventListener('click', () => openAIChat(copyText));
    } catch (err){
        showError(err.message || err);
        console.error(err);
    }
}

function spreadN(count,title, customLabels = null){
    try {
        const drawnCardNames = drawUnique(count, ALL_CARDS);

        if (customLabels) {
            const config = AI_CONFIG[selectedAI];
            let copyText = `Y√äU C·∫¶U: H√£y gi·∫£i nghƒ©a chi ti·∫øt v√† ƒë∆∞a ra l·ªùi khuy√™n d·ª±a tr√™n tr·∫£i b√†i ti√™n tri n√†y:\n--- ${title} ---\n`;
            let html = `<div class="spread-title">${title}</div><ul class="card-list">`;
            
            drawnCardNames.forEach((cardName,i)=> {
                const card = getCardData(cardName);
                const label = customLabels[i];

                html += `<li>
                            <div class="card-title">${label}:</div>
                            <div class="card-info">
                                <img src="${card.image_url}" alt="${card.name}" class="card-img" onerror="this.style.display='none'">
                                <div>
                                    <strong>${card.name}</strong>
                                    <div class="card-keywords">${card.keywords}</div>
                                </div>
                            </div>
                        </li>`;
                copyText += `${label}: ${card.name} (${card.keywords})\n`;
            });

            html += `</ul>
                     <div class="actions">
                         <button id="btn-redo">üîÅ R√∫t l·∫°i</button>
                         <button id="btn-show-deck">üìö Xem b·ªô b√†i</button>
                         <button id="btn-copy" class="btn-copy">üíæ Ch·ªâ Copy Text</button>
                         <button id="btn-ai" class="btn-ai" style="background:${config.color}">ü§ñ H·ªèi ${config.name}</button>
                     </div>`;
            showHtml(html);
            document.getElementById('btn-redo').addEventListener('click', ()=>{ location.reload(); });
            document.getElementById('btn-show-deck').addEventListener('click', showFullDeck);
            document.getElementById('btn-copy').addEventListener('click', () => copyToClipboard(copyText).then(() => showToast("ƒê√£ sao ch√©p!")));
            document.getElementById('btn-ai').addEventListener('click', () => openAIChat(copyText));
        } else {
            displaySpread(title, drawnCardNames);
        }
    } catch(err){
        showError(err.message || err);
        console.error(err);
    }
}

function showFullDeck(){
    try {
        let html = `<div class="spread-title">To√†n b·ªô b·ªô b√†i (${CARDS_DATA.length} l√°)</div><div class="deck-grid">`;
        CARDS_DATA.forEach((c,i)=> html += `<div class="deck-item"><strong>${i+1}.</strong> ${c.name} (${c.keywords})</div>`);
        html += `</div><div class="actions"><button id="btn-close-deck">ƒê√≥ng</button></div>`;
        showHtml(html);
        document.getElementById('btn-close-deck').addEventListener('click', ()=>{ location.reload(); });
    } catch(err){
        showError(err.message || err);
        console.error(err);
    }
}

/* Countdown thay b·∫±ng Loading State 3 gi√¢y */
function startDrawing(count,title,fn){
    try {
        const loadingTime = 3000;
        const btns = document.querySelectorAll('.controls button, .ai-option');
        btns.forEach(b=>b.disabled=true);
        showHtml(`<div class="loading-display">
                      <p class="loading-instruction">T·∫≠p trung v√† nghƒ© v·ªÅ v·∫•n ƒë·ªÅ c·ªßa b·∫°n...</p>
                      <div class="loading-spinner"></div>
                      <p class="loading-instruction">ƒêang r√∫t b√†i ti√™n tri...</p>
                  </div>`);
        
        setTimeout(()=>{
            try {
                fn();
            } finally {
                btns.forEach(b=>b.disabled=false);
            }
        }, loadingTime);
    } catch(err){
        showError(err.message || err);
        console.error(err);
    }
}

/* -------------------- X·ª¨ L√ù S·ª∞ KI·ªÜN & AI TOGGLE -------------------- */

// C·∫≠p nh·∫≠t giao di·ªán n√∫t AI v√† m√†n h√¨nh nh·ªè
function updateAISelection(aiKey) {
    selectedAI = aiKey;
    localStorage.setItem('selectedAI', aiKey);
    const geminiBtn = document.getElementById('select-gemini');
    const chatgptBtn = document.getElementById('select-chatgpt');
    const display = document.getElementById('selected-ai-display');
    
    geminiBtn.classList.remove('selected-gemini', 'selected-chatgpt');
    chatgptBtn.classList.remove('selected-gemini', 'selected-chatgpt');
    
    if (aiKey === 'gemini') {
        geminiBtn.classList.add('selected-gemini');
        display.innerHTML = `Gi·∫£i nghƒ©a b·∫±ng **Gemini**`;
    } else {
        chatgptBtn.classList.add('selected-chatgpt');
        display.innerHTML = `Gi·∫£i nghƒ©a b·∫±ng **ChatGPT**`;
    }
}

document.addEventListener('DOMContentLoaded', () => {
    // 1. Kh·ªüi t·∫°o tr·∫°ng th√°i AI ban ƒë·∫ßu
    updateAISelection(selectedAI);

    // 2. G·∫Øn event cho AI selector
    document.getElementById('select-gemini').addEventListener('click', () => updateAISelection('gemini'));
    document.getElementById('select-chatgpt').addEventListener('click', () => updateAISelection('chatgpt'));

    // 3. G·∫Øn event cho c√°c n√∫t tr·∫£i b√†i (d√πng startDrawing m·ªõi)
    document.getElementById('btn-3').addEventListener('click', ()=> startDrawing(3,'Tr·∫£i B√†i 3 L√°', ()=> spreadN(3,'Tr·∫£i B√†i 3 L√°')));
    document.getElementById('btn-5').addEventListener('click', ()=> startDrawing(5,'Tr·∫£i B√†i 5 L√°', ()=> spreadN(5,'Tr·∫£i B√†i 5 L√°')));

    // Tr·∫£i 7 Ng√†y
    document.getElementById('btn-7').addEventListener('click', ()=> startDrawing(7,'Tr·∫£i B√†i 7 Ng√†y', ()=> {
        const days=["Th·ª© Hai","Th·ª© Ba","Th·ª© T∆∞","Th·ª© NƒÉm","Th·ª© S√°u","Th·ª© B·∫£y","Ch·ªß Nh·∫≠t"];
        spreadN(7,'Tr·∫£i B√†i Theo Tu·∫ßn (7 ng√†y)', days);
    }));

    // Tr·∫£i Theo Th√°ng
    document.getElementById('btn-4').addEventListener('click', ()=> startDrawing(4,'Tr·∫£i B√†i Theo Th√°ng', ()=> {
        const weeks=["Tu·∫ßn 1","Tu·∫ßn 2","Tu·∫ßn 3","Tu·∫ßn 4"];
        spreadN(4,'Tr·∫£i B√†i Theo Th√°ng (4 tu·∫ßn)', weeks);
    }));

    // Tr·∫£i Theo NƒÉm
    document.getElementById('btn-12').addEventListener('click', ()=> startDrawing(12,'Tr·∫£i B√†i Theo NƒÉm', ()=> {
        const months=["Th√°ng 1","Th√°ng 2","Th√°ng 3","Th√°ng 4","Th√°ng 5","Th√°ng 6","Th√°ng 7","Th√°ng 8","Th√°ng 9","Th√°ng 10","Th√°ng 11","Th√°ng 12"];
        spreadN(12,'Tr·∫£i B√†i Theo NƒÉm (12 th√°ng)', months);
    }));

    document.getElementById('btn-deck').addEventListener('click', showFullDeck);
});

/* b·∫£o v·ªá: n·∫øu c√≥ l·ªói JS l√∫c load, hi·ªÉn th·ªã l·ªói */
window.addEventListener('error', function(evt){
    try {
        showError('C√≥ l·ªói tr√™n trang: ' + (evt && evt.message ? evt.message : 'unknown'));
        console.error(evt);
    } catch(e){}
});
</script>
</body>
</html>
